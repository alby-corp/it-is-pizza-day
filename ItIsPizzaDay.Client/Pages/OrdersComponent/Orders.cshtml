@page "/orders"
@inherits OrdersComponent

<h1>Ordini</h1>
<table class="table">
    <thead>
    <tr>
        <th scope="col">Ordine</th>
        <th scope="col">Supplementi</th>
        <th scope="col">Rimozioni</th>
        <th scope="col">Prezzo</th>
    </tr>
    </thead>
    <tbody>

    @foreach (var order in Orders.OrderByDescending(o => o.Date))
    {
        
        foreach (var foodOrder in order.FoodOrder)
        {
            <tr>
                <td>@foodOrder.FoodNavigation.Name</td>
                <td>
                    <ul>
                        @foreach (var ingredient in foodOrder.FoodOrderIngredient.Where(i => !i.Isremoval))
                        {
                            <li>@ingredient.IngredientNavigation.Name</li>
                        }
                    </ul>
                </td>
                <td>
                    <ul>
                        @foreach (var ingredient in foodOrder.FoodOrderIngredient.Where(i => i.Isremoval))
                        {
                            <li>@ingredient.IngredientNavigation.Name</li>
                        }
                    </ul>
                </td>
                <td>
                    @((foodOrder.FoodOrderIngredient.Where(i => !i.Isremoval).Sum(i => i.IngredientNavigation.Price ?? 0) + foodOrder.FoodNavigation.Price).ToString("N2")) &euro;
                </td>
            </tr>
        }
    }
    </tbody>
</table>